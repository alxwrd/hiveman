var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function o(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(e,t){e.appendChild(t)}function c(e,t,n){e.insertBefore(t,n||null)}function a(e){e.parentNode.removeChild(e)}function u(e){return document.createElement(e)}function i(e){return document.createTextNode(e)}function d(){return i(" ")}function f(){return i("")}function p(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function h(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}let m;function g(e){m=e}const $=[],b=[],w=[],y=[],v=Promise.resolve();let x=!1;function k(e){w.push(e)}function j(e){y.push(e)}let O=!1;const _=new Set;function E(){if(!O){O=!0;do{for(let e=0;e<$.length;e+=1){const t=$[e];g(t),N(t.$$)}for($.length=0;b.length;)b.pop()();for(let e=0;e<w.length;e+=1){const t=w[e];_.has(t)||(_.add(t),t())}w.length=0}while($.length);for(;y.length;)y.pop()();x=!1,O=!1,_.clear()}}function N(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(k)}}const S=new Set;let T;function A(){T={r:0,c:[],p:T}}function L(){T.r||r(T.c),T=T.p}function C(e,t){e&&e.i&&(S.delete(e),e.i(t))}function H(e,t,n,r){if(e&&e.o){if(S.has(e))return;S.add(e),T.c.push(()=>{S.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}function I(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function J(e){e&&e.c()}function M(e,n,l){const{fragment:s,on_mount:c,on_destroy:a,after_update:u}=e.$$;s&&s.m(n,l),k(()=>{const n=c.map(t).filter(o);a?a.push(...n):r(n),e.$$.on_mount=[]}),u.forEach(k)}function P(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function z(e,t){-1===e.$$.dirty[0]&&($.push(e),x||(x=!0,v.then(E)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function B(t,o,l,s,c,u,i=[-1]){const d=m;g(t);const f=o.props||{},p=t.$$={fragment:null,ctx:null,props:u,update:e,not_equal:c,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:i};let h=!1;if(p.ctx=l?l(t,f,(e,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&c(p.ctx[e],p.ctx[e]=o)&&(p.bound[e]&&p.bound[e](o),h&&z(t,e)),n}):[],p.update(),h=!0,r(p.before_update),p.fragment=!!s&&s(p.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);p.fragment&&p.fragment.l(e),e.forEach(a)}else p.fragment&&p.fragment.c();o.intro&&C(t.$$.fragment),M(t,o.target,o.anchor),E()}g(d)}class D{$destroy(){P(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function U(t){let n,o,l,f,m,g,$,b;return{c(){n=u("div"),o=u("label"),l=i(t[1]),f=d(),m=u("input"),h(o,"class","font-bold text-gray-700 block mb-2"),h(m,"type",t[3]),m.value=t[0],h(m,"class",g="block appearance-none w-full bg-white border border-gray-400\r\n    hover:border-gray-600 px-2 py-2 rounded shadow outline-none "+(""===t[0]&&t[4]?"border-red-400":"border-gray-400")),h(m,"placeholder",t[2]),h(n,"class","mb-4")},m(e,r){c(e,n,r),s(n,o),s(o,l),s(n,f),s(n,m),$||(b=[p(m,"blur",t[5]),p(m,"input",t[6]),p(m,"change",t[6])],$=!0)},p(e,[t]){2&t&&function(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}(l,e[1]),8&t&&h(m,"type",e[3]),1&t&&m.value!==e[0]&&(m.value=e[0]),17&t&&g!==(g="block appearance-none w-full bg-white border border-gray-400\r\n    hover:border-gray-600 px-2 py-2 rounded shadow outline-none "+(""===e[0]&&e[4]?"border-red-400":"border-gray-400"))&&h(m,"class",g),4&t&&h(m,"placeholder",e[2])},i:e,o:e,d(e){e&&a(n),$=!1,r(b)}}}function W(e,t,n){let{label:r}=t,{placeholder:o=r}=t,{type:l="text"}=t,{value:s=""}=t,c=!1;return e.$set=e=>{"label"in e&&n(1,r=e.label),"placeholder"in e&&n(2,o=e.placeholder),"type"in e&&n(3,l=e.type),"value"in e&&n(0,s=e.value)},[s,r,o,l,c,()=>{n(4,c=!0)},e=>{n(0,s="checkbox"===e.target.type?e.target.checked:e.target.value)}]}class X extends D{constructor(e){super(),B(this,e,W,U,l,{label:1,placeholder:2,type:3,value:0})}}function q(t){let n;return{c(){n=u("div"),n.innerHTML='<img class="h-full py-2" src="assests/hive.svg" alt="Logo, of a bee hive"> \n  <p class="lg:text-4xl md:text-3xl text-xl px-2 font-bold text-gray-800">Hiveman</p>',h(n,"class","w-full h-full flex justify-center items-center")},m(e,t){c(e,n,t)},p:e,i:e,o:e,d(e){e&&a(n)}}}class F extends D{constructor(e){super(),B(this,e,null,q,l,{})}}const G=[];const K=(e,t)=>{let n=JSON.parse(window.localStorage.getItem(e));return n||t},Q=(e,t)=>{window.localStorage.setItem(e,JSON.stringify(t))},R=function(t,n=e){let r;const o=[];function s(e){if(l(t,e)&&(t=e,r)){const e=!G.length;for(let e=0;e<o.length;e+=1){const n=o[e];n[1](),G.push(n,t)}if(e){for(let e=0;e<G.length;e+=2)G[e][0](G[e+1]);G.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(l,c=e){const a=[l,c];return o.push(a),1===o.length&&(r=n(s)||e),l(t),()=>{const e=o.indexOf(a);-1!==e&&o.splice(e,1),0===o.length&&(r(),r=null)}}}}(K("auth",{}));R.subscribe(e=>{let t=!1;0===Object.keys(K("auth",{})).length&&Object.keys(e).length&&(t=!0),Q("auth",e),t&&location.reload()});let V;R.subscribe(e=>{V=e});function Y(e,t){return(n="/auth/sessions",r="POST",o=JSON.stringify({sessions:[{username:e,password:t,caller:"WEB"}]}),l=Object.assign(l||{},{"Content-Type":"application/vnd.alertme.zoo-6.1+json",Accept:"application/vnd.alertme.zoo-6.1+json","X-Omnia-Client":"Hive Web Dashboard"}),Object.keys(V).length&&(l=Object.assign(l,{"X-Omnia-Access-Token":V.sessionId})),fetch("https://api.prod.bgchprod.info:443/omnia"+n,{method:r,headers:l,body:o}).then(e=>{if(!e.ok&&401===e.status)throw R.set(void 0),new Error("Not authorised, check authdetails: "+R);return e})).then(e=>{if(!e.ok)throw new Error;return e.json()}).then(e=>(R.set(e.sessions[0]),e));var n,r,o,l}function Z(e){let t,n,r,o,l,i,f,m,g,$,w,y,v,x,k,O;function _(t){e[3].call(null,t)}r=new F({});let E={label:"Username"};function N(t){e[4].call(null,t)}void 0!==e[0]&&(E.value=e[0]),f=new X({props:E}),b.push(()=>I(f,"value",_));let S={label:"Password",type:"password"};return void 0!==e[1]&&(S.value=e[1]),$=new X({props:S}),b.push(()=>I($,"value",N)),{c(){t=u("div"),n=u("div"),J(r.$$.fragment),o=d(),l=u("div"),i=u("form"),J(f.$$.fragment),g=d(),J($.$$.fragment),y=d(),v=u("div"),v.innerHTML='<button class="bg-yellow-600 hover:bg-yellow-500 text-white font-bold py-2\n          px-4 rounded">Login</button>',h(n,"class","h-16 sm:h-24 md:h-32 my-4"),h(v,"class","flex items-center justify-between"),h(l,"class","border-yellow-600 p-8 border-t-8 bg-white mb-6 rounded-lg shadow-lg"),h(t,"class","w-10/12 lg:w-8/12 xl:w-5/12")},m(a,u){var d;c(a,t,u),s(t,n),M(r,n,null),s(t,o),s(t,l),s(l,i),M(f,i,null),s(i,g),M($,i,null),s(i,y),s(i,v),x=!0,k||(O=p(i,"submit",(d=e[2],function(e){return e.preventDefault(),d.call(this,e)})),k=!0)},p(e,[t]){const n={};!m&&1&t&&(m=!0,n.value=e[0],j(()=>m=!1)),f.$set(n);const r={};!w&&2&t&&(w=!0,r.value=e[1],j(()=>w=!1)),$.$set(r)},i(e){x||(C(r.$$.fragment,e),C(f.$$.fragment,e),C($.$$.fragment,e),x=!0)},o(e){H(r.$$.fragment,e),H(f.$$.fragment,e),H($.$$.fragment,e),x=!1},d(e){e&&a(t),P(r),P(f),P($),k=!1,O()}}}function ee(e,t,n){let r,o;return[r,o,function(){r&&o?Y(r,o):console.error("No login data supplied")},function(e){r=e,n(0,r)},function(e){o=e,n(1,o)}]}class te extends D{constructor(e){super(),B(this,e,ee,Z,l,{})}}function ne(e){let t,n,r,o,l,i,f,m,g,$,b,w,y;return l=new F({}),{c(){t=u("header"),n=u("div"),r=d(),o=u("div"),J(l.$$.fragment),i=d(),f=u("div"),m=u("div"),g=u("img"),h(n,"class","w-1/4 md:w-1/6 lg:w-1/12"),h(o,"class","w-1/2"),h(g,"class","h-8 mx-6 absolute right-0 rounded-full shadow-md\r\n          hover:scale-105 transform transition-transform ease-in-out\r\n          duration-500"),g.src!==($="https://www.gravatar.com/avatar/"+e[1]+"?d=identicon")&&h(g,"src",$),h(g,"alt","User avatar"),h(m,"class","py-4"),h(f,"class","w-1/4 md:w-1/6 lg:w-1/12"),h(t,"class","bg-yellow-600 h-16 flex justify-between shadow-md")},m(a,u){c(a,t,u),s(t,n),s(t,r),s(t,o),M(l,o,null),s(t,i),s(t,f),s(f,m),s(m,g),b=!0,w||(y=p(f,"click",e[2]),w=!0)},p(e,t){(!b||2&t&&g.src!==($="https://www.gravatar.com/avatar/"+e[1]+"?d=identicon"))&&h(g,"src",$)},i(e){b||(C(l.$$.fragment,e),b=!0)},o(e){H(l.$$.fragment,e),b=!1},d(e){e&&a(t),P(l),w=!1,y()}}}function re(e){let t,n,r=e[0].username&&ne(e);return{c(){r&&r.c(),t=f()},m(e,o){r&&r.m(e,o),c(e,t,o),n=!0},p(e,[n]){e[0].username?r?(r.p(e,n),1&n&&C(r,1)):(r=ne(e),r.c(),C(r,1),r.m(t.parentNode,t)):r&&(A(),H(r,1,1,()=>{r=null}),L())},i(e){n||(C(r),n=!0)},o(e){H(r),n=!1},d(e){r&&r.d(e),e&&a(t)}}}function oe(e,t,n){let r={},o="";R.subscribe(e=>{n(0,r=e),n(1,o=md5(r.username||"")),console.log(o)});return[r,o,()=>{R.set({})}]}class le extends D{constructor(e){super(),B(this,e,oe,re,l,{})}}function se(t){let n,r;return n=new le({}),{c(){J(n.$$.fragment)},m(e,t){M(n,e,t),r=!0},p:e,i(e){r||(C(n.$$.fragment,e),r=!0)},o(e){H(n.$$.fragment,e),r=!1},d(e){P(n,e)}}}class ce extends D{constructor(e){super(),B(this,e,null,se,l,{})}}function ae(e){let t,n;return t=new ce({}),{c(){J(t.$$.fragment)},m(e,r){M(t,e,r),n=!0},i(e){n||(C(t.$$.fragment,e),n=!0)},o(e){H(t.$$.fragment,e),n=!1},d(e){P(t,e)}}}function ue(e){let t,n,r;return n=new te({}),{c(){t=u("div"),J(n.$$.fragment),h(t,"class","container mx-auto my-16 xl:my-32 flex justify-center items-center")},m(e,o){c(e,t,o),M(n,t,null),r=!0},i(e){r||(C(n.$$.fragment,e),r=!0)},o(e){H(n.$$.fragment,e),r=!1},d(e){e&&a(t),P(n)}}}function ie(e){let t,n,r,o;const l=[ue,ae],s=[];function u(e,t){return e[0]?1:0}return t=u(e),n=s[t]=l[t](e),{c(){n.c(),r=f()},m(e,n){s[t].m(e,n),c(e,r,n),o=!0},p(e,[o]){let c=t;t=u(e),t!==c&&(A(),H(s[c],1,1,()=>{s[c]=null}),L(),n=s[t],n||(n=s[t]=l[t](e),n.c()),C(n,1),n.m(r.parentNode,r))},i(e){o||(C(n),o=!0)},o(e){H(n),o=!1},d(e){s[t].d(e),e&&a(r)}}}function de(e,t,n){let r=!1;R.subscribe(e=>{n(0,r=!!e.sessionId)});return[r]}return new class extends D{constructor(e){super(),B(this,e,de,ie,l,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
